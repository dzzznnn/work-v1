<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ShiftSwap | Internal Beta</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
    <style>
        .glass { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); }
        #signature-pad { border: 2px dashed #e2e8f0; border-radius: 8px; width: 100%; height: 200px; }
        body { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen pb-24 text-slate-900 font-sans">

    <header class="sticky top-0 z-30 glass border-b border-slate-200 px-4 py-4 mb-4">
        <div class="flex justify-between items-center max-w-md mx-auto">
            <h1 class="text-xl font-bold tracking-tight text-indigo-600">ShiftSwap</h1>
            <div class="flex gap-3">
                <i data-lucide="bell" class="w-6 h-6 text-slate-500"></i>
                <i data-lucide="user-circle" class="w-6 h-6 text-slate-500"></i>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto px-4 space-y-4">
        <div class="flex gap-2 p-1 bg-slate-200 rounded-lg text-sm font-medium">
            <button class="flex-1 py-2 bg-white rounded-md shadow-sm">All Shifts</button>
            <button class="flex-1 py-2 text-slate-600">My Posts</button>
        </div>

        <div id="shift-feed" class="space-y-3">
            <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 active:scale-[0.98] transition-transform" onclick="openClaimModal('Friday, Oct 27', '08:00 - 16:00', 'Giveaway')">
                <div class="flex justify-between items-start mb-2">
                    <span class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider bg-green-100 text-green-700">Giveaway</span>
                    <span class="text-slate-400 text-xs italic font-medium">Posted by Alex M.</span>
                </div>
                <h3 class="font-bold text-lg">Friday, Oct 27</h3>
                <div class="flex items-center gap-2 text-slate-600 text-sm mt-1">
                    <i data-lucide="clock" class="w-4 h-4"></i>
                    08:00 - 16:00 (8h)
                </div>
            </div>

            <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 active:scale-[0.98] transition-transform" onclick="openClaimModal('Saturday, Oct 28', '12:00 - 20:00', 'Swap')">
                <div class="flex justify-between items-start mb-2">
                    <span class="px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider bg-blue-100 text-blue-700">Swap Requested</span>
                    <span class="text-slate-400 text-xs italic font-medium">Posted by Sam R.</span>
                </div>
                <h3 class="font-bold text-lg text-slate-800">Saturday, Oct 28</h3>
                <div class="flex items-center gap-2 text-slate-600 text-sm mt-1">
                    <i data-lucide="clock" class="w-4 h-4"></i>
                    12:00 - 20:00 (8h)
                </div>
                <p class="mt-2 text-xs text-indigo-500 font-medium">Looking for: Sunday morning shift</p>
            </div>
        </div>
    </main>

    <button class="fixed bottom-6 right-6 w-14 h-14 bg-indigo-600 rounded-full shadow-lg flex items-center justify-center text-white active:bg-indigo-700 active:scale-95 transition-all">
        <i data-lucide="plus" class="w-8 h-8"></i>
    </button>

    <div id="modal" class="fixed inset-0 z-50 hidden bg-black/50 flex items-end sm:items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-t-2xl sm:rounded-2xl p-6 animate-in slide-in-from-bottom">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Claim Shift</h2>
                <button onclick="closeModal()"><i data-lucide="x" class="w-6 h-6"></i></button>
            </div>
            
            <div id="modal-content" class="mb-6 text-slate-600">
                </div>

            <div class="mb-4">
                <label class="block text-sm font-medium mb-1">E-Signature</label>
                <canvas id="signature-pad"></canvas>
                <button onclick="signaturePad.clear()" class="text-xs text-indigo-600 mt-1 font-medium italic">Clear Signature</button>
            </div>

            <button onclick="completeClaim()" class="w-full bg-indigo-600 text-white py-4 rounded-xl font-bold active:scale-[0.98] transition-transform">
                Confirm & Generate Form
            </button>
        </div>
    </div>

    <script>
        // Initialize Icons
        lucide.createIcons();

        // Signature Pad Logic
        const canvas = document.getElementById('signature-pad');
        const signaturePad = new SignaturePad(canvas);

        function openClaimModal(date, time, type) {
            document.getElementById('modal-content').innerHTML = `
                <p class="text-sm">You are claiming the <strong>${type}</strong> for:</p>
                <p class="text-lg font-bold text-slate-900 mt-1">${date}</p>
                <p class="text-md">${time}</p>
                <p class="mt-4 text-xs bg-amber-50 p-2 text-amber-700 rounded border border-amber-100">
                    <strong>Note:</strong> This is a digital proxy. You must still verify this with the duty manager until UKG integration is approved.
                </p>
            `;
            document.getElementById('modal').classList.remove('hidden');
            // Resize canvas to fit modal
            canvas.width = canvas.offsetWidth;
            canvas.height = 200;
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
            signaturePad.clear();
        }

        function completeClaim() {
            if (signaturePad.isEmpty()) {
                alert("Please sign to confirm the swap.");
                return;
            }
            alert("Success! A digital request has been logged. Show this screen to your Duty Manager.");
            closeModal();
        }
    </script>
</body>
</html>
